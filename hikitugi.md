# 📘 社内書類作成ツール 開発・運用引き継ぎ書

**作成日:** 2025年12月12日
**開発環境:** HTML, CSS, JavaScript
**公開環境:** Vercel (GitHub連携)

---

## 1. ツール概要
ブラウザ上で「在職証明書」や「領収証」などの社内書類を作成し、A4サイズで印刷・PDF保存するためのツール群です。
ポータル画面（メニュー）から各ツールにアクセスして使用します。

### 主な特徴
*   **インストール不要:** URLにアクセスするだけで使用可能。
*   **自動計算:** 領収証の消費税（10%/8%）、合計金額を自動計算。
*   **会社情報の一括管理:** 一度登録すれば、全ての書類に会社名・住所等が自動反映される。
*   **セキュリティ:** 簡易的なパスワードロック機能付き（`lock.js`）。

---

## 2. システム構成（仕組み）

このツールは、以下の仕組みで動いています。

1.  **コード置き場 (GitHub):**
    *   インターネット上の倉庫。ここに最新のプログラムが保存されています。
    *   アカウント名: `tabumaho8-collab` (※または `tabumaho7-code`)
    *   リポジトリ名: `shorui` (または `cert-tool`)
2.  **公開サーバー (Vercel):**
    *   GitHubの中身を自動で読み取って、世界中にWebサイトとして表示するサービス。
    *   GitHubが更新されると、Vercelも自動で更新されます。
3.  **データベース:**
    *   サーバー上のデータベースは使用していません。
    *   **LocalStorage (ブラウザ保存):** 会社情報や領収証の連番などは、使う人のブラウザ（ChromeやEdge）の中に保存されます。

---

## 3. ファイル構成
フォルダの中身は以下のようになっています。
**重要:** フォルダ階層を深くせず、すべて同じ場所に並べてください（Vercelのエラー原因になります）。

| ファイル名 | 説明 |
| :--- | :--- |
| **index.html** | **【玄関】** メニュー画面。会社情報の登録機能もここにあります。 |
| **zaishoku.html** | **【在職証明書】** 入力フォームとプレビュー画面。 |
| **ryoshusho.html** | **【領収証・詳細】** 明細行あり、インボイス対応、自動ナンバリング機能付き。 |
| **ryoshusho_simple.html** | **【領収書・簡易】** 合計金額のみ入力するタイプ。 |
| **lock.js** | **【鍵】** パスワード制限（ログイン機能）を管理するプログラム。 |
| **settings.js** | **【脳】** 会社情報の保存・読み込みを一括管理するプログラム。 |

---

## 4. 更新手順（ここが一番大事！）
内容を修正したり、新しいツールを追加した時は、以下の手順で更新します。

### 手順①：ファイルの編集
手元のパソコンで HTML や JS ファイルを編集・保存します。

### 手順②：PowerShellで送信（デプロイ）
1.  作業フォルダを開き、何もないところで `Shift` + `右クリック` → **「PowerShell ウィンドウをここで開く」**。
2.  以下の3つのコマンドを順番に入力します。

```powershell
# 1. 変更したファイルをすべて荷台に乗せる
git add .

# 2. メッセージを付けて箱詰めする（"修正内容" は変えてOK）
git commit -m "修正内容のメモ"

# 3. GitHubへ送信する
git push
```

### 手順③：確認
`git push` が成功（`Writing objects... 100%` と表示）すれば、**Vercelが自動的に感知して、約1分後にWebサイトが更新**されます。
サイトを開いて変更が反映されているか確認してください。

---

## 5. よくあるトラブルと対処法

### Q1. Vercelで "404 Not Found" になる
*   **原因:** GitHub内のフォルダ階層が深くなっている可能性があります（例: `Desktop/syorui/index.html`）。
*   **対処:** ファイルを一番上（ルート）に移動させるか、Vercelの Settings > Build & Deployment > **Root Directory** を確認・修正してください。基本は「空欄」がベストです。

### Q2. 会社情報が反映されない
*   **原因:** `index.html` で保存ボタンを押していないか、ブラウザのキャッシュの問題。
*   **対処:** `index.html` で再度「設定を保存する」を押してください。また、各ファイルの底にある `<script src="settings.js"></script>` が正しく書かれているか確認してください。

### Q3. GitHubに送れない（エラーが出る）
*   **エラー:** `remote: Repository not found`
    *   **対処:** ログインしているGitHubアカウントが違います。`git remote set-url ...` で正しいURLを設定し直してください。
*   **エラー:** `failed to push some refs`
    *   **対処:** GitHub上のデータと手元のデータが食い違っています。強制的に上書きする場合は `git push -f origin main` を使いますが、慎重に行ってください。

---

## 6. 各種設定値（カスタマイズ用）

プログラム内の以下の部分を書き換えることで設定変更できます。

*   **パスワード変更:**
    *   `lock.js` の 2行目: `const PASSWORD = "0000";` の数字を変更。
*   **領収証の明細行数:**
    *   `ryoshusho.html` の script内: `const ROW_COUNT = 6;` の数字を変更。
*   **領収証の初期番号:**
    *   `ryoshusho.html` の script内: `loadReceiptNumber` 関数にある `"100001"` を変更。

---

以上
---

# 📘 社内書類作成ツール 開発・運用引き継ぎ書 (v3.0)

**最終更新:** 2025年12月15日
**開発言語:** HTML5, CSS3, JavaScript (Vanilla)
**インフラ:** Vercel (GitHub連携)

---

## 1. ツール概要
Webブラウザ上で動作する、社内事務作業の統合ポータルシステム。
インストール不要で利用でき、入力データはサーバーではなくユーザーのブラウザ内（LocalStorage）に保存されるため、手軽かつセキュリティリスクを抑えた設計となっている。

### ✨ 主な機能
*   **ポータル画面:** ダッシュボード形式（2カラム）でツールと設定を集約。
*   **書類作成:** 請求書、領収証、在職証明書、送付状などをPDF化・印刷。
*   **自動化機能:**
    *   **共通情報反映:** 会社名・住所などを全ツールへ自動入力。
    *   **電子印鑑:** 透過PNG画像を登録し、書類に自動押印（ON/OFF可）。
    *   **自動計算:** 消費税（10%/8%）、小計、合計の自動算出。
    *   **自動採番:** 請求書・領収証のNo.を印刷ごとに自動カウントアップ。
*   **一括処理:** 支店・関連会社への送付状を一括生成・印刷。

---

## 2. システム構成（データの流れ）

### 共通データ管理 (`settings.js`)
*   **保存:** `index.html` のサイドバーで入力された「会社情報」と「ハンコ画像データ（Base64変換）」を `localStorage` に保存。
*   **反映:** 各ツールを開いた瞬間にデータを読み込み、IDマッピング機能を用いて適切な入力欄に値をセットする。

### 電子印鑑の仕組み
*   画像ファイルをBase64文字列（テキストデータ）に変換してブラウザに保存している。
*   **注意:** データ容量制限のため、画像サイズは500KB以下推奨。背景が透明なPNG必須。

---

## 3. ファイル構成と役割

| ファイル名 | 分類 | 役割・機能 |
| :--- | :--- | :--- |
| `index.html` | **玄関** | ダッシュボード画面。共通設定（会社情報・ハンコ）の登録。 |
| `lock.js` | **認証** | 簡易パスワードロック機能。 |
| `settings.js` | **設定** | データの保存・読込・反映ロジックの中枢。 |
| `zaishoku.html` | 一般 | **在職証明書**。ハンコ対応。 |
| `ryoshusho.html` | 一般 | **領収証(詳細)**。明細行あり、インボイス対応、自動採番、ハンコON/OFF。 |
| `ryoshusho_simple.html` | 一般 | **領収証(簡易)**。合計金額入力のみ。ハンコON/OFF。 |
| `seikyu.html` | 一般 | **請求書**。振込先保存、自動採番、ハンコON/OFF。 |
| `sofujo.html` | 発送 | **送付状(単発)**。社外/社内切替、挨拶文自動挿入、個人差出人保存。 |
| `sofujo_multi.html` | 発送 | **一括送付状**。宛先リスト管理、一括印刷機能。 |
| `envelope.html` | 発送 | **封筒印刷**。長形3号サイズ、横書き。 |

---

## 4. 保存データキー一覧 (LocalStorage)
デバッグやデータ移行の際に参照する、ブラウザ内の保存キー名。

| キー名 (`Key`) | 保存内容 | 使用ファイル |
| :--- | :--- | :--- |
| `my_tool_company_info` | 会社基本情報 ＋ ハンコ画像データ | 全般 |
| `my_tool_receipt_seq` | 領収証の連番 (次回番号) | ryoshusho.html |
| `my_tool_invoice_seq` | 請求書の連番 (次回番号) | seikyu.html |
| `my_tool_invoice_auto_mode`| 請求書自動採番のON/OFF状態 | seikyu.html |
| `my_tool_bank_info` | 請求書の振込先口座情報 | seikyu.html |
| `my_tool_sofujo_sender` | 送付状の個人差出人情報 | sofujo.html / multi |
| `my_tool_destinations` | 一括送付状の宛先リスト | sofujo_multi.html |

---

## 5. 更新・運用マニュアル

### 修正を公開する手順 (Git/Vercel)
1.  手元のPCでコードを修正・上書き保存。
2.  作業フォルダでPowerShellを開く。
3.  以下のコマンドを実行してGitHubへ送信。
    ```powershell
    git add .
    git commit -m "修正内容をここに書く"
    git push
    ```
4.  数分待てば、Vercel経由で公開サイトが自動更新される。

### ハンコ画像の登録方法
1.  「Web認印」などのサイトで、背景が**透明**なPNG画像を作成・ダウンロードする。
2.  `index.html` 左側の「電子印鑑」欄からファイルをアップロード。
3.  「設定を保存する」ボタンを押す。

### プリンター設定の注意
*   **封筒印刷:** 用紙サイズを必ず「長形3号 (120x235mm)」に設定する。
*   **送付状のハンコ:** 送付状ツールは、画面上では透かしでハンコ位置が表示されるが、**印刷時にはCSSで非表示になる仕様**（送付状に押印は不要なため）。

---

## 6. よくあるトラブルシューティング

### Q. ハンコが表示されない / 保存できない
*   **原因:** 画像サイズが大きすぎてLocalStorageの容量制限を超えている。
*   **対策:** 画像を縮小するか、もっとシンプルな画像に変更する。推奨は500KB以下。

### Q. 自動採番の番号がずれた / リセットしたい
*   **対策:** 各ツールの入力欄（No.）に、手動で「開始したい番号」を入力して一度印刷する。すると、その番号が次回の基準として保存される。

### Q. Vercelで 404 エラーになる
*   **対策:** GitHubのリポジトリ内でフォルダ階層が深くなっていないか確認。すべての `.html` ファイルはルート（一番上）に置くこと。

---

## 7. 今後の拡張予定（To-Do）

*   [ ] **設定バックアップ機能:** LocalStorageの内容（宛先リストなど）をJSONファイルとして書き出し・読み込みする機能。PC買い替え時のデータ移行に必須。
*   [ ] **計算機の追加:** ジム（スポーツ）用の1RM計算機など、別ジャンルのツール追加。

以上

---

### 📘 2. 引き継ぎ書 (v4.0)

こちらがこれまでの集大成をまとめた**「完全版 引き継ぎ書」**です。
`hikitugi.md` として保存してください。

```markdown
# 📘 社内書類作成ツール 開発・運用引き継ぎ書 (v4.0)

**最終更新:** 2025年12月15日
**開発言語:** HTML5, CSS3, JavaScript (Vanilla)
**インフラ:** Vercel (GitHub連携)

---

## 1. ツール概要
Webブラウザ上で動作する、社内事務作業の統合ポータルシステム。
PC・スマホ両対応。インストール不要。
入力データはサーバーには送信せず、ユーザーのブラウザ内（LocalStorage）に保存されるため、セキュリティリスクを抑えた設計となっている。

### ✨ 実装済み機能リスト
1.  **ポータル画面 (Dashboard):** 
    *   2カラムレイアウト（設定サイドバー固定）。
    *   共通会社情報・電子印鑑の登録機能。
2.  **書類作成ツール:**
    *   **請求書 / 見積書 / 納品書:** インボイス対応、自動計算、自動採番、ハンコ自動押印。
    *   **領収証 (詳細/簡易):** 10%/8%計算、ハンコ自動押印。
    *   **送付状:** 社外/社内切替、挨拶文定型ボタン、個人差出人保存。
    *   **一括送付状:** 宛先リスト管理、一括生成・印刷。
    *   **封筒印刷:** 長形3号、横書き。
    *   **在職証明書:** A4公的文書スタイル。
3.  **業務支援ツール:**
    *   **経費精算書:** 交通費計算、15行対応。
    *   **通勤費精算書:** 経路マスタ保存、カレンダー式入力、月別データ保存。
    *   **稟議書:** 承認フロー枠付き。
    *   **勤怠・有給シミュレーター:** 年間休日・有給残管理、カレンダー一括表示。

---

## 2. デザイン・レイアウト共通ルール
書類の見た目を統一するため、以下のルールでコーディングされている。

*   **会社情報ブロック:**
    *   右端に寄せるが、内部のテキストは**「左揃え」**にする。
    *   CSS: `width: max-content; margin-left: auto; text-align: left;`
*   **電子印鑑:**
    *   サイズ: **40px** (四角)
    *   位置: 担当者名の横に少し被るように配置（`position: absolute; right: -15px;`）。
    *   印刷設定: **印刷時は電子印鑑のみ表示し、手押し用のダミー枠や収入印紙の文字は消す**。

---

## 3. ファイル構成一覧

| ファイル名 | 分類 | 役割・機能 |
| :--- | :--- | :--- |
| `index.html` | **玄関** | ダッシュボード画面。共通設定。 |
| `lock.js` | **認証** | 簡易パスワードロック機能。 |
| `settings.js` | **設定** | データの保存・読込・反映ロジックの中枢。 |
| `seikyu.html` | 事務 | **請求書**。振込先保存、自動採番。 |
| `mitsumori.html` | 事務 | **見積書**。有効期限欄あり。緑テーマ。 |
| `nohin.html` | 事務 | **納品書**。受領印欄あり。オレンジテーマ。 |
| `ryoshusho.html` | 事務 | **領収証(詳細)**。明細あり。 |
| `ryoshusho_simple.html` | 事務 | **領収証(簡易)**。合計のみ。 |
| `sofujo.html` | 発送 | **送付状**。挨拶文ボタンあり。 |
| `sofujo_multi.html` | 発送 | **一括送付状**。宛先リスト機能。 |
| `fax.html` | 発送 | **FAX送付状**。太字デザイン。定型文ボタン。 |
| `envelope.html` | 発送 | **封筒印刷**。長形3号。 |
| `keihi.html` | 勤怠 | **経費精算書**。 |
| `tsukin.html` | 勤怠 | **通勤費精算書**。月別保存、経路マスタ。 |
| `ringi.html` | 社内 | **稟議書**。承認印枠。 |
| `kintai.html` | 社内 | **勤怠シミュレーター**。有給管理。 |
| `zaishoku.html` | 社内 | **在職証明書**。 |

---

## 4. 保存データキー一覧 (LocalStorage)
ブラウザに保存されるデータのキー名。データ移行や削除時に参照。

| キー名 (`Key`) | 保存内容 | 
| :--- | :--- | 
| `my_tool_company_info` | 会社基本情報 ＋ ハンコ画像 |
| `my_tool_receipt_seq` | 領収証 連番 |
| `my_tool_invoice_seq` | 請求書 連番 |
| `my_tool_estimate_seq` | 見積書 連番 |
| `my_tool_delivery_seq` | 納品書 連番 |
| `my_tool_invoice_auto_mode` | 自動採番ON/OFF状態 (各書類共通) |
| `my_tool_bank_info` | 振込先口座情報 |
| `my_tool_sofujo_sender` | 送付状 個人差出人 |
| `my_tool_destinations` | 一括送付状 宛先リスト |
| `my_tool_tsukin_routes` | 通勤費 経路マスタ |
| `my_tool_tsukin_data_YYYY-MM` | 通勤費 月別データ |
| `my_tool_kintai_data` | 勤怠カレンダーデータ |
| `my_tool_kintai_stock` | 有給残日数 |

---

## 5. 更新・運用マニュアル

### 修正を公開する手順
1.  手元のPCでコードを修正・上書き保存。
2.  作業フォルダでPowerShellを開く (`Shift`+右クリック)。
3.  以下のコマンドを実行。
    ```powershell
    git add .
    git commit -m "修正内容"
    git push
    ```
4.  数分後、Vercelにて自動反映完了。

### 電子印鑑の仕様
*   推奨サイズ: **500KB以下の透過PNG**。
*   容量オーバーすると保存できないため、画像圧縮サイトなどで軽量化すること。

### プリンター設定
*   **封筒印刷:** 用紙設定を「長形3号」にすること。
*   **余白:** ブラウザ印刷設定で「ヘッダーとフッター」のチェックを外すと、URL等が印字されずきれいになる。

---

## 6. トラブルシューティング

*   **Q. 会社情報が入らない**
    *   A. `index.html` で「設定を保存する」を押し直してください。
*   **Q. レイアウトが崩れる**
    *   A. キャッシュが残っている可能性があります。`Ctrl + F5` (スーパーリロード) を試してください。
*   **Q. 印刷するとハンコが消える**
    *   A. ブラウザの印刷設定で「背景のグラフィック」にチェックを入れてください（ただし、本ツールはCSSで制御しているため、基本的にはチェックなしでも画像は出るはずですが、環境によります）。

以上
```

---

# 📘 社内書類作成ツール 開発・運用引き継ぎ書 (v5.0)

**最終更新:** 2025年12月17日
**開発言語:** HTML5, CSS3, JavaScript (Vanilla)
**インフラ:** Vercel (GitHub連携)

---

## 1. ツール概要
Webブラウザ上で動作する、社内事務作業の統合ポータルシステム。
PC・スマホ両対応。インストール不要。
入力データはサーバーには送信せず、ユーザーのブラウザ内（LocalStorage）に保存されるため、セキュリティリスクを抑えつつ手軽に利用できる。

### ✨ 実装済み機能リスト
1.  **ポータル画面 (Dashboard):** 
    *   2カラムレイアウト（設定サイドバー固定）。
    *   **会社印（角印）** と **個人印（認印）** の2種類を登録・保存可能。
2.  **書類作成ツール:**
    *   **請求書 / 見積書 / 納品書:** 
        *   インボイス対応、自動計算、自動採番。
        *   **ハンコ切替機能**（会社印/個人印）。
        *   印刷時レイアウト最適化（A4自動縮小）。
    *   **領収証 (詳細/簡易):** 10%/8%計算、ハンコ切替、自動採番。
    *   **送付状関係:** FAX、単発送付状、一括送付状、封筒印刷。
    *   **社内・勤怠:** 稟議書、経費精算、通勤費精算、勤怠シミュレーター、在職証明書。
3.  **データ管理:**
    *   会社情報、振込先、経路マスタ、宛先リストなどをブラウザに保存。

---

## 2. システム構成・共通仕様

### 共通データ管理 (`settings.js`)
*   **保存:** `index.html` で入力された「会社情報」と「ハンコ画像（2種）」をBase64変換し `localStorage` に保存。
*   **反映:** 各ツール起動時にデータを読み込み、IDマッピング機能で自動入力。

### ハンコ（電子印鑑）の仕様
*   **画像:** 背景透過PNG推奨（500KB以下）。
*   **切替:** 各ツール内のラジオボタンで「会社印」と「個人印」を切り替え可能。
*   **表示制御:**
    *   **画面上:** 位置確認のため表示。未登録時はダミー枠「(印)」を表示。
    *   **印刷時:** ダミー枠は非表示にし、画像のみを印刷する。

### レイアウト共通ルール（CSS）
書類の「発行者情報（会社名・住所・氏名）」は以下のルールで統一されている。
*   **配置:** ブロック全体を右端に寄せるが、文字の書き出しは左に揃える。
    ```css
    .issuer-info {
        width: max-content;   /* 文字数に合わせて幅を決定 */
        max-width: 50%;       /* 最大でも半分まで */
        margin-left: auto;    /* 右寄せ */
        text-align: left;     /* 内部テキストは左揃え */
        position: relative;   /* ハンコ配置の基準点 */
    }
    ```
*   **ハンコ位置:**
    *   `position: absolute;` で配置。
    *   担当者名の右横に少し重なるように配置（`top: 40px; right: -15px;` 等で微調整済み）。
    *   サイズは **40px × 40px** に統一。

---

## 3. ファイル構成一覧

| ファイル名 | 分類 | 役割・機能 |
| :--- | :--- | :--- |
| `index.html` | **玄関** | ダッシュボード。会社情報・ハンコ(2種)の登録。 |
| `lock.js` | **認証** | 簡易パスワードロック機能。 |
| `settings.js` | **設定** | データ保存・読込・反映ロジックの中枢。 |
| `seikyu.html` | 事務 | **請求書**。ハンコ切替、振込先保存。青テーマ。 |
| `mitsumori.html` | 事務 | **見積書**。有効期限欄。緑テーマ。 |
| `nohin.html` | 事務 | **納品書**。受領印欄。オレンジテーマ。 |
| `ryoshusho.html` | 事務 | **領収証(詳細)**。自動採番、ハンコ切替。 |
| `ryoshusho_simple.html` | 事務 | **領収証(簡易)**。合計のみ入力。 |
| `sofujo.html` | 発送 | **送付状(単発)**。社外/社内切替、個人差出人保存。 |
| `sofujo_multi.html` | 発送 | **一括送付状**。宛先リスト管理、一括印刷。 |
| `fax.html` | 発送 | **FAX送付状**。太字デザイン、定型文ボタン。 |
| `envelope.html` | 発送 | **封筒印刷**。長形3号。 |
| `keihi.html` | 勤怠 | **経費精算書**。 |
| `tsukin.html` | 勤怠 | **通勤費精算書**。月別保存、経路マスタ。 |
| `ringi.html` | 社内 | **稟議書**。承認印枠。起案者印自動。 |
| `kintai.html` | 社内 | **勤怠シミュレーター**。有給管理、カレンダー一括表示。 |
| `zaishoku.html` | 社内 | **在職証明書**。 |

---

## 4. 運用マニュアル

### 印刷時の注意（見切れ対策）
*   各ツールには印刷用のCSS設定が含まれている。
*   `zoom: 0.8;` または `width: 100%;` の指定により、A4用紙に収まるように調整済み。
*   それでも切れる場合は、プリンター設定の「倍率」を調整すること。

### データ移行・バックアップ
*   データはすべてブラウザ（Chrome/Edgeなど）の中に保存されている。
*   **ブラウザのキャッシュをクリアするとデータが消える**ため注意。
*   PC買い替え時は、手動で再登録が必要（将来的にバックアップ機能の実装を推奨）。

---

## 5. 更新手順 (Git/Vercel)

修正を加えた際の公開手順。

1.  手元のPCでファイルを編集・上書き保存。
2.  作業フォルダでPowerShellを開く。
3.  以下のコマンドを実行。
    ```powershell
    git add .
    git commit -m "修正内容のメモ"
    git push
    ```
4.  数分後、Vercel経由でWEBサイトが自動更新される。

以上
