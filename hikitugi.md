# 📘 社内書類作成ツール 開発・運用引き継ぎ書

**作成日:** 2025年12月12日
**開発環境:** HTML, CSS, JavaScript
**公開環境:** Vercel (GitHub連携)

---

## 1. ツール概要
ブラウザ上で「在職証明書」や「領収証」などの社内書類を作成し、A4サイズで印刷・PDF保存するためのツール群です。
ポータル画面（メニュー）から各ツールにアクセスして使用します。

### 主な特徴
*   **インストール不要:** URLにアクセスするだけで使用可能。
*   **自動計算:** 領収証の消費税（10%/8%）、合計金額を自動計算。
*   **会社情報の一括管理:** 一度登録すれば、全ての書類に会社名・住所等が自動反映される。
*   **セキュリティ:** 簡易的なパスワードロック機能付き（`auth.js`）。

---

## 2. システム構成（仕組み）

このツールは、以下の仕組みで動いています。

1.  **コード置き場 (GitHub):**
    *   インターネット上の倉庫。ここに最新のプログラムが保存されています。
    *   アカウント名: `tabumaho8-collab` (※または `tabumaho7-code`)
    *   リポジトリ名: `shorui` (または `cert-tool`)
2.  **公開サーバー (Vercel):**
    *   GitHubの中身を自動で読み取って、世界中にWebサイトとして表示するサービス。
    *   GitHubが更新されると、Vercelも自動で更新されます。
3.  **データベース:**
    *   サーバー上のデータベースは使用していません。
    *   **LocalStorage (ブラウザ保存):** 会社情報や領収証の連番などは、使う人のブラウザ（ChromeやEdge）の中に保存されます。

---

## 3. ファイル構成
フォルダの中身は以下のようになっています。
**重要:** フォルダ階層を深くせず、すべて同じ場所に並べてください（Vercelのエラー原因になります）。

| ファイル名 | 説明 |
| :--- | :--- |
| **index.html** | **【玄関】** メニュー画面。会社情報の登録機能もここにあります。 |
| **zaishoku.html** | **【在職証明書】** 入力フォームとプレビュー画面。 |
| **ryoshusho.html** | **【領収証・詳細】** 明細行あり、インボイス対応、自動ナンバリング機能付き。 |
| **ryoshusho_simple.html** | **【領収書・簡易】** 合計金額のみ入力するタイプ。 |
| **auth.js** | **【鍵】** パスワード制限（ログイン機能）を管理するプログラム。 |
| **settings.js** | **【脳】** 会社情報の保存・読み込みを一括管理するプログラム。 |

---

## 4. 更新手順（ここが一番大事！）
内容を修正したり、新しいツールを追加した時は、以下の手順で更新します。

### 手順①：ファイルの編集
手元のパソコンで HTML や JS ファイルを編集・保存します。

### 手順②：PowerShellで送信（デプロイ）
1.  作業フォルダを開き、何もないところで `Shift` + `右クリック` → **「PowerShell ウィンドウをここで開く」**。
2.  以下の3つのコマンドを順番に入力します。

```powershell
# 1. 変更したファイルをすべて荷台に乗せる
git add .

# 2. メッセージを付けて箱詰めする（"修正内容" は変えてOK）
git commit -m "修正内容のメモ"

# 3. GitHubへ送信する
git push
```

### 手順③：確認
`git push` が成功（`Writing objects... 100%` と表示）すれば、**Vercelが自動的に感知して、約1分後にWebサイトが更新**されます。
サイトを開いて変更が反映されているか確認してください。

---

## 5. よくあるトラブルと対処法

### Q1. Vercelで "404 Not Found" になる
*   **原因:** GitHub内のフォルダ階層が深くなっている可能性があります（例: `Desktop/syorui/index.html`）。
*   **対処:** ファイルを一番上（ルート）に移動させるか、Vercelの Settings > Build & Deployment > **Root Directory** を確認・修正してください。基本は「空欄」がベストです。

### Q2. 会社情報が反映されない
*   **原因:** `index.html` で保存ボタンを押していないか、ブラウザのキャッシュの問題。
*   **対処:** `index.html` で再度「設定を保存する」を押してください。また、各ファイルの底にある `<script src="settings.js"></script>` が正しく書かれているか確認してください。

### Q3. GitHubに送れない（エラーが出る）
*   **エラー:** `remote: Repository not found`
    *   **対処:** ログインしているGitHubアカウントが違います。`git remote set-url ...` で正しいURLを設定し直してください。
*   **エラー:** `failed to push some refs`
    *   **対処:** GitHub上のデータと手元のデータが食い違っています。強制的に上書きする場合は `git push -f origin main` を使いますが、慎重に行ってください。

---

## 6. 各種設定値（カスタマイズ用）

プログラム内の以下の部分を書き換えることで設定変更できます。

*   **パスワード変更:**
    *   `auth.js` の 2行目: `const PASSWORD = "0000";` の数字を変更。
*   **領収証の明細行数:**
    *   `ryoshusho.html` の script内: `const ROW_COUNT = 6;` の数字を変更。
*   **領収証の初期番号:**
    *   `ryoshusho.html` の script内: `loadReceiptNumber` 関数にある `"100001"` を変更。

---

以上